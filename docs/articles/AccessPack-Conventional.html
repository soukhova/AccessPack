<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AccessPack-Conventional • AccessPack</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="AccessPack-Conventional">
<meta property="og:description" content="AccessPack">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">AccessPack</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/AccessPack-Conventional.html">AccessPack-Conventional</a>
    </li>
    <li>
      <a href="../articles/Empirical-Example.html">Empirical Example: GTHA Workers</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="AccessPack-Conventional_files/header-attrs-2.11/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>AccessPack-Conventional</h1>
            
      
      
      <div class="hidden name"><code>AccessPack-Conventional.Rmd</code></div>

    </div>

    
    
<div id="conventional-accessibility" class="section level2">
<h2 class="hasAnchor">
<a href="#conventional-accessibility" class="anchor"></a>Conventional Accessibility</h2>
<p>We have been experimenting with proportional allocation in accessibility measures, and have discussed the concept of <em>spatial availability</em>. Briefly, consider the following conventional accessibility measure <span class="math inline">\(A_i\)</span> : <span class="math display">\[
A_i = \sum_{j=1}^JW_jf(c_{ij})
\]</span></p>
<p>Where, - <span class="math inline">\(i\)</span> is a set of origin locations. - <span class="math inline">\(j\)</span> is a set of destination locations. - <span class="math inline">\(W_j\)</span> is the number of opportunities at location <span class="math inline">\(j\)</span>. These are opportunities for activity and add some sort of <em>supply</em> to the area; - <span class="math inline">\(c_{ij}\)</span> is a measure of the cost of moving between <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span> - <span class="math inline">\(f(\cdot)\)</span> is an impedance (or distance-decay) function (a monotonically non-increasing or decreasing function of <span class="math inline">\(c_{ij}\)</span>).</p>
<p>In this way, the conventional accessibility value <span class="math inline">\(A_i\)</span> is the weighted sum of opportunities that can be reached from location <span class="math inline">\(i\)</span>. Summing the opportunities in the neighborhood of <span class="math inline">\(i\)</span> (the neighborhood is defined by the impedance function) estimates of the total number of opportunities that can be reached from <span class="math inline">\(i\)</span> at a certain cost. It is well known that this is a gravity-type measure of accessibility, and it is a widely used tool in transportation studies. This is our starting point.</p>
<p>The following is a toy example in which first we will calculate conventional accessibility, <span class="math inline">\(A_i\)</span>, and explore how this measure falls short. We will then calculate <em>Spatial Availability</em>, our proposed accessibility measure, and discuss how it improves interpretability.</p>
<div id="numerical-toy-example" class="section level3">
<h3 class="hasAnchor">
<a href="#numerical-toy-example" class="anchor"></a>Numerical Toy Example</h3>
<p>In this section we present a numerical toy example to calculate conventional accessibility <span class="math inline">\(A_i\)</span>.</p>
<p>Load packages needed for the example:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">AccessPack</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/">kableExtra</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com">patchwork</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span></code></pre></div>
<p>This is the setup for the example: three employment centers and nine population centers.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">type</span>,
              shape <span class="op">=</span> <span class="va">type</span>,
              size <span class="op">=</span> <span class="va">number</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">id_short</span><span class="op">)</span>,
               size <span class="op">=</span> <span class="fl">3</span>,
               nudge_y <span class="op">=</span> <span class="op">-</span><span class="fl">600</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html">scale_size</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">7</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
        legend.position <span class="op">=</span> <span class="st">"none"</span>,
        panel.grid <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="AccessPack-Conventional_files/figure-html/unnamed-chunk-2-1.png" width="576"></p>
<p>This is the distribution of jobs and population:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">toy_sim_zones</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>fig <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>format <span class="op">=</span> <span class="st">"latex"</span>,
        booktabs <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/column_spec.html">column_spec</a></span><span class="op">(</span><span class="fl">5</span>, image <span class="op">=</span> <span class="st">"images/figure-1.png"</span><span class="op">)</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/collapse_rows.html">collapse_rows</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fl">5</span>, latex_hline <span class="op">=</span> <span class="st">"major"</span>, valign <span class="op">=</span> <span class="st">"middle"</span><span class="op">)</span></code></pre></div>
<p>Now, let’s calculate conventional accessibility <span class="math inline">\(A_i\)</span> where we will yield how many jobs (opportunities) are accessibility to each population center.</p>
<p>As our <span class="math inline">\(c_{ij}\)</span> is unitless ‘distance’; let’s assume an impedance function is simply a binary switch in which on jobs which are at distances equal to or less than the mean (3692.0555976 units) from population centers are considered; meaning any employment center which is further than than this mean is not considered in evaluating the job accessibility for each origin.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># using the origin-destination table (OD) of all origin to destination trips; filter in only jobs which are mean distance or less away from a population center and sum number of jobs available in each origin (population center)</span>
<span class="va">c_accessibility</span> <span class="op">&lt;-</span> <span class="fu">AccessPack</span><span class="fu">::</span><span class="va"><a href="../reference/toy_od_table.html">toy_od_table</a></span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">distance</span> <span class="op">&lt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">distance</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">Origin</span><span class="op">)</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>c_access_jobs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">Jobs</span><span class="op">)</span><span class="op">)</span>

<span class="co">#pass conventional accessibility calculation into the spatial object (toy_sim_zones)</span>
<span class="va">toy_sim_zones_access</span>  <span class="op">&lt;-</span> <span class="va">toy_sim_zones</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span><span class="va">c_accessibility</span>, by.x <span class="op">=</span><span class="st">"id"</span>, by.y <span class="op">=</span> <span class="st">"Origin"</span>, all.x<span class="op">=</span><span class="cn">T</span><span class="op">)</span> </code></pre></div>
<p>Plot origin conventional accessibility</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">toy_c_access_jobs_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"population"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">c_access_jobs</span>,
              size <span class="op">=</span> <span class="va">c_access_jobs</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">17</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"population"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">c_access_jobs</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"jobs"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">number</span> <span class="op">*</span><span class="fl">3</span>,
              shape <span class="op">=</span> <span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_color_distiller</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"OrRd"</span>,
                        direction <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>size <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>

<span class="va">toy_c_access_jobs_plot</span> </code></pre></div>
<p><img src="AccessPack-Conventional_files/figure-html/unnamed-chunk-6-1.png" width="576"></p>
<p>Here we see of the three employment centers (black dots), the bigger the dot the larger number of jobs available. We also see nine population centers (triangles), where the bigger the triangle the larger the population and the darker the orange the more ‘job accessibility’ that center has access to.</p>
<ul>
<li><p>Population centers (triangles) in the middle of the map have access to all three employment centers and thus have the highest amount of job accessibility (i.e. Population center P4 has the maximum job accessibility 4500);</p></li>
<li><p>Population centers (triangles) near the left edge of the map (only in proximity to the small employment center) have the least amount of job accessibility (i.e. Population centers P1, P2 has the minimum job accessibility 750);</p></li>
</ul>
<p><strong>What are the issues?</strong></p>
<p>What does a maximum of 4500 and a minimum of 750 job accessibility mean exactly? We can normalize this value by considering population centers, employment centres, or the average global population or jobs. However, the value is not sensitive to the population at the origin seeking the opportunity (in this case jobs). For this reason, the value of <span class="math inline">\(A_i\)</span> is difficult to interpret.</p>
<p>This is where our proposed <em>spatial availability</em> measure is introduced. In the following five sections we will explore this new measure using the toy example introduced. First, we will describe the measure. Second, we will calculate the <em>spatial availability</em> from the perspective of the population. Then, we will calculate the <em>spatial availability</em> from the perspective of the employment centers. Next, we calculate the <em>spatial availability</em> for a segment of specialized working population. Finally, we will compare the conventional accessibility calculation to the proposed <em>spatial availability</em>.</p>
</div>
</div>
<div id="spatial-availability" class="section level2">
<h2 class="hasAnchor">
<a href="#spatial-availability" class="anchor"></a>Spatial Availability</h2>
<p>As we have discussed proportional allocations (see for instance Paez, Higgins, Vivona, 2019), it has become increasingly clear that a lot of multiple-counting happens when calculating conventional accessibility <span class="math inline">\(A_i\)</span> for <span class="math inline">\(i=1,\cdots,n\)</span>, since every opportunity that can be reached from every <span class="math inline">\(i\)</span> enters the sum. This obscures the interpretability of <span class="math inline">\(A_i\)</span> and fails to answer questions like: “so I live in a population center with maximum job accessibility… but how many jobs can I actually access?”</p>
<p>For this reason, we have thought of a related concept that we are provisionally calling <em>spatial availability</em>, and that we think of as a singly-constrained measure of accessibility.</p>
<p>How does this work? It all comes down to proportional allocation. We wish to allocate opportunities proportionally, based on the number of size of, and the distance to, the demand for opportunities.</p>
<p>This framework is appropriate for non-divisible opportunities. Examples of non-divisible opportunities are jobs (when a person takes up a job, the same job is no longer available to anyone else), seats at schools (once a seat has been taken, it is no longer available to another student). From a different perspective, employers may see workers as opportunities, but when a worker takes a job, they are no longer in the available pool of candidates.</p>
<p>We distinguish between opportunities and demand.</p>
<p>To illustrate our analytical framework, we will think of demand as ‘population’ and opportunities as ‘jobs’.</p>
<p>We begin with allocation based on demand (the number of individuals in the population in the labor market). Consider an employment center <span class="math inline">\(j\)</span> with <span class="math inline">\(W_j^r\)</span> jobs of type <span class="math inline">\(r\)</span>. There are also <span class="math inline">\(K\)</span> population centers in the region. To allocate the jobs proportionally based on the population of each center we define the following proportional allocation factor: <span class="math display">\[
f^p_{ij} = \frac{P_{i\in r}^\alpha}{\sum_{k=1}^K P_{k\in r}^\alpha}
\]</span> where <span class="math inline">\(f^p_{ij}\)</span> is a factor to proportionally allocate a share of the jobs at <span class="math inline">\(j\)</span> to population center <span class="math inline">\(i\)</span>. On the right hand side of the equation, <span class="math inline">\(P_{k\in r}\)</span> is the population at location <span class="math inline">\(k\)</span> eligible for taking jobs of type <span class="math inline">\(r\)</span> (maybe those with a certain level of training, or in a designated age group). Here we add a parameter <span class="math inline">\(\alpha\)</span> that can be used to modulate the effect of size in the calculations. The summation in the bottom is over <span class="math inline">\(k=1,\cdots,K\)</span>, the number of population centers in the region. The factors <span class="math inline">\(f_{kj}^p\)</span> satisfy the property that <span class="math inline">\(\sum_k^{K} f^p_{kj} = 1\)</span>.</p>
<p>The share of jobs allocated to (i.e., available for) each population center is: <span class="math display">\[
V_{kj} = W_jf^p_{kj}
\]</span> and since <span class="math inline">\(\sum_k^{K} f^p_{kj} = 1\)</span> it follows that: <span class="math display">\[
\sum_{k=1}^K V_{kj} = W_j 
\]</span></p>
<p>In other words, the number of jobs is preserved.</p>
<p>As an example, consider an employment center <span class="math inline">\(j\)</span> in a region with two population centers (say <span class="math inline">\(j\)</span> and <span class="math inline">\(k\)</span>). For simplicity, assume that all jobs in the population centers are eligible for the population in this region. The allocation factors for the jobs at <span class="math inline">\(j\)</span> would be: <span class="math display">\[
\begin{array}{l}\
f^p_{ij} = \frac{P_i ^\alpha}{P_i^\alpha + P_k^\alpha}\\
f^p_{kj} = \frac{P_k^\alpha}{P_i^\alpha + P_k^\alpha}\\
\end{array}
\]</span></p>
<p>Suppose that there are three hundred jobs in the employment center (<span class="math inline">\(W_j = 300\)</span>), and that the populations are <span class="math inline">\(P_j=240\)</span> and <span class="math inline">\(P_k=120\)</span>. The jobs would be allocated as follows (assuming that <span class="math inline">\(\alpha=1\)</span>): <span class="math display">\[
\begin{array}{l}\
V_{ij} = W_j\frac{P_i^\alpha}{P_i^\alpha + P_k^\alpha} = 300\frac{240}{240 + 120} = 300\frac{240}{360} = 200\\
V_{kj} = W_j\frac{P_k^\alpha}{P_i^\alpha + P_k^\alpha} = 300\frac{120}{240 + 120} = 300\frac{120}{360} = 100 \\
\end{array}
\]</span> Proportionally more jobs are allocated to the bigger center and the total number of jobs is preserved (<span class="math inline">\(\sum_{k=1}^K W_{kj} = W_j\)</span>).</p>
<p>The proportional allocation factors above account for the capacity of the employment centers, but they do not account for their location relative to the population centers. The proportional allocation procedure above is insensitive to how far population center <span class="math inline">\(i\)</span> is from employment center <span class="math inline">\(j\)</span>. To account for this effect we can define a second set of allocation factors based on distance to the employment centers. These are defined as: <span class="math display">\[
f^d_{ij} = \frac{f(c_{ij})}{\sum_{k=1}^K f(c_{kj})}
\]</span> where <span class="math inline">\(c_{ij}\)</span> is the distance/(travel time, etc.) to employment center <span class="math inline">\(j\)</span> from population center <span class="math inline">\(i\)</span>, and <span class="math inline">\(f(\cdot)\)</span> is an impedance function (a monotonically decreasing function of <span class="math inline">\(c_{kj}\)</span>. The idea is that proportionally more jobs are allocated to closer locations. Assume that the impedance function is: <span class="math display">\[
f(c_{ij}) = \exp(-\beta c_{ij})
\]</span></p>
<p>Continuing the example, suppose that the distance from population center <span class="math inline">\(i\)</span> to employment center <span class="math inline">\(j\)</span> is 0.6 km, and the distance from population center <span class="math inline">\(k\)</span> to employment center <span class="math inline">\(j\)</span> is 0.3 km. Being closer, we would expect more jobs to be allocated to the population of <span class="math inline">\(i\)</span>. The jobs would be sorted as follows: <span class="math display">\[
\begin{array}{l}\
f^d_{ij} = \frac{\exp(-\beta D_{ij})}{\exp(-\beta D_{ij}) + \exp(-\beta D_{kj})}\\
f^d_{kj} = \frac{\exp(-\beta D_{kj})}{\exp(-\beta D_{ij}) + \exp(-\beta D_{kj})}\\
\end{array}
\]</span></p>
<p>Numerically, the jobs allocated to each population center would be: <span class="math display">\[
\begin{array}{l}\
V^d_{ij} = W_j\frac{\exp(-D_{ij})}{\exp(-D_{ij}) + \exp(-D_{kj})} = 300\frac{\exp(-0.6)}{\exp(-0.6) + \exp(-0.3)} = 3\times 0.426 = 127.8\\
V^d_{kj} = W_j\frac{\exp(-D_{kj})}{\exp(-D_{ij}) + \exp(-D_{kj})} = 300\frac{\exp(-0.3)}{\exp(-0.6) + \exp(-0.3)} = 3\times  0.574 = 172.2\\
\end{array}
\]</span> Proportionally more jobs are allocated to the closer population center. As before, the sum of jobs allocated to the population centers matches the total number of jobs available.</p>
<p>We can combine the proportional allocation factors by population and distance as follows: <span class="math display">\[
V_{ij} = W_i\frac{f^p_{ij} \cdot f^d_{ij}}{\sum_{k=1}^K f^p_{kj} \cdot f^d_{kj}}
\]</span> In the example: <span class="math display">\[
\begin{array}{l}\
V_{ij} = W_j\cdot \frac{f^o_{ij} \cdot f^d_{ij}}{f^o_{ij} \cdot f^d_{ij} + f^o_{kj} \cdot f^d_{kj}} = 300 \frac{\big(\frac{2}{3} \big) \big(0.426 \big)}{\big(\frac{2}{3} \big) \big(0.426 \big) + \big(\frac{1}{3} \big) \big(0.574 \big)} = \big(300 \big)\big(\frac{0.284}{0.475} \big)= 179.4\\
V_{kj} = W_j\cdot \frac{f^o_{kj} \cdot f^d_{kj}}{f^o_{ij} \cdot f^d_{ij} + f^o_{ik} \cdot f^d_{ik}} = 300 \frac{\big(\frac{1}{3} \big) \big(0.574 \big)}{\big(\frac{2}{3} \big) \big(0.426 \big) + \big(\frac{1}{3} \big) \big(0.574 \big)}  = \big(300 \big)\big(\frac{0.191}{0.475} \big)= 120.6 \\
\end{array}
\]</span> Fewer jobs are allocated to population center <span class="math inline">\(i\)</span> compared to the allocation by population size only, to account for the longer distance to reach those jobs. Considering distance alone allocated more jobs to the closer population center (i.e., <span class="math inline">\(k\)</span>), but since it is smaller, it also get a smaller proportion of jobs overall. Again, the sum of jobs at employment center <span class="math inline">\(j\)</span> that are allocated to population centers <span class="math inline">\(i\)</span> and <span class="math inline">\(k\)</span> simultaneously based on <em>population</em> and <em>distance</em> is preserved (i.e., <span class="math inline">\(W_{ij} + W_{kj} = W_j\)</span>).</p>
<p>Availability is the sum of available jobs by origin: <span class="math display">\[
V_i = \sum_{j=1}^J V_{ij}
\]</span></p>
<div id="st-use-case-available-jobs-for-the-working-population" class="section level3">
<h3 class="hasAnchor">
<a href="#st-use-case-available-jobs-for-the-working-population" class="anchor"></a>1st Use Case: Available Jobs for The Working Population</h3>
<p>In this section we present the same numerical example as presented above but additionally calculate <em>spatial availability</em> <span class="math inline">\(V_ij\)</span>. We conclude by contrasting the two measures in the final section.</p>
<p>First we assign an impedance function:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">beta</span> <span class="op">&lt;-</span> <span class="fl">0.0015</span>
<span class="va">toy_od_table</span> <span class="op">&lt;-</span> <span class="va">toy_od_table</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>f <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="op">-</span><span class="va">beta</span> <span class="op">*</span> <span class="va">distance</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Next we calculate the <em>spatial availability</em> for each origin:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">toy_od_table</span> <span class="op">&lt;-</span> <span class="va">toy_od_table</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>catch <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>V_ij <span class="op">=</span> <span class="fu"><a href="../reference/sp_avail.html">sp_avail</a></span><span class="op">(</span><span class="va">.</span>, 
                         o_id <span class="op">=</span> <span class="va">Origin</span>, 
                         d_id <span class="op">=</span> <span class="va">Destination</span>, 
                         pop <span class="op">=</span> <span class="va">Population</span>, 
                         opp <span class="op">=</span> <span class="va">Jobs</span>,
                         r <span class="op">=</span> <span class="va">catch</span>,
                         f <span class="op">=</span> <span class="va">f</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Verify that the sum of all jobs allocated is consistent with the total number of jobs:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">toy_od_table</span><span class="op">$</span><span class="va">V_ij</span><span class="op">)</span>
<span class="co">#&gt; [1] 4500</span>

<span class="va">sum_jobs</span> <span class="op">&lt;-</span> <span class="va">toy_od_table</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">Destination</span><span class="op">)</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>Jobs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">Jobs</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">sum_jobs</span><span class="op">$</span><span class="va">Jobs</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="co">#&gt; [1] 4500</span></code></pre></div>
<p>The total number of jobs is preserved.</p>
<p>Aggregate available jobs by origin:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">availability</span> <span class="op">&lt;-</span> <span class="va">toy_od_table</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">Origin</span><span class="op">)</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>avail_jobs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">V_ij</span><span class="op">)</span><span class="op">)</span>
<span class="va">availability</span>
<span class="co">#&gt; # A tibble: 9 x 2</span>
<span class="co">#&gt;   Origin       avail_jobs</span>
<span class="co">#&gt;   &lt;fct&gt;             &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Population 1       67.0</span>
<span class="co">#&gt; 2 Population 2      414. </span>
<span class="co">#&gt; 3 Population 3      336. </span>
<span class="co">#&gt; 4 Population 4      745. </span>
<span class="co">#&gt; 5 Population 5     2081. </span>
<span class="co">#&gt; 6 Population 6      270. </span>
<span class="co">#&gt; 7 Population 7      256. </span>
<span class="co">#&gt; 8 Population 8      316. </span>
<span class="co">#&gt; 9 Population 9       14.9</span></code></pre></div>
<p>Join the availability to the simulated zones:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">toy_sim_zones_access</span> <span class="op">&lt;-</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">availability</span>, 
            by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id"</span> <span class="op">=</span> <span class="st">"Origin"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Plot the availability estimates:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">toy_avail_jobs_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"population"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">avail_jobs</span>,
              size <span class="op">=</span> <span class="va">avail_jobs</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">17</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"population"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">avail_jobs</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"jobs"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">number</span>,
              shape <span class="op">=</span> <span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_color_distiller</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"OrRd"</span>,
                        direction <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>size <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>

<span class="va">toy_avail_jobs_plot</span></code></pre></div>
<p><img src="AccessPack-Conventional_files/figure-html/unnamed-chunk-12-1.png" width="576"></p>
<p>How do we interpret this? Accessibility is the number of jobs that can be reached at a given cost. Here, the total number of jobs is a constant. Population center 5 has the greatest availability, due to being a large population center that is moreover relatively close to jobs.</p>
<p>Since the total number of jobs is constant, we can calculate the available jobs per person:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">toy_sim_zones_access</span> <span class="op">&lt;-</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>avail_jobs_per_person <span class="op">=</span> <span class="va">avail_jobs</span><span class="op">/</span><span class="va">number</span><span class="op">)</span></code></pre></div>
<p>Plot the availability per person:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">toy_avail_jobs_person_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"population"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">avail_jobs_per_person</span>,
              size <span class="op">=</span> <span class="va">avail_jobs_per_person</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">17</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"population"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">avail_jobs_per_person</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"jobs"</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">16</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_color_gradient2</a></span><span class="op">(</span>midpoint <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>size <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>


<span class="va">toy_avail_jobs_person_plot</span></code></pre></div>
<p><img src="AccessPack-Conventional_files/figure-html/unnamed-chunk-14-1.png" width="576"></p>
<p>Some population centers have almost two jobs available per person, and others less than one job available per person. This does not mean that people are not taking some of the jobs. It means that controlling for the cost of reaching jobs, they are worse off than those with more jobs spatially available.</p>
</div>
<div id="nd-use-case-available-workers-for-employment-centers" class="section level3">
<h3 class="hasAnchor">
<a href="#nd-use-case-available-workers-for-employment-centers" class="anchor"></a>2nd Use Case: Available Workers for Employment Centers</h3>
<p>We can also examine the pool of workers available to each employment center by considering the workers as opportunities and the jobs as the population.</p>
<p>Calculate the proportional allocation of jobs to population (referred to as <span class="math inline">\(W_ij\)</span>):</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">toy_od_table</span> <span class="op">&lt;-</span> <span class="va">toy_od_table</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>catch <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>W_ij <span class="op">=</span> <span class="fu"><a href="../reference/sp_avail.html">sp_avail</a></span><span class="op">(</span><span class="va">.</span>, 
                         o_id <span class="op">=</span> <span class="va">Destination</span>, 
                         d_id <span class="op">=</span> <span class="va">Origin</span>, 
                         pop <span class="op">=</span> <span class="va">Jobs</span>, 
                         opp <span class="op">=</span> <span class="va">Population</span>,
                         r <span class="op">=</span> <span class="va">catch</span>,
                         f <span class="op">=</span> <span class="va">f</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Verify that the sum of all population allocated is consistent with the total number of population:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">toy_od_table</span><span class="op">$</span><span class="va">W_ij</span><span class="op">)</span>
<span class="co">#&gt; [1] 4525</span>

<span class="va">sum_pop</span> <span class="op">&lt;-</span> <span class="va">toy_od_table</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">Origin</span><span class="op">)</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>Population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">Population</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">sum_pop</span><span class="op">$</span><span class="va">Population</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="co">#&gt; [1] 4525</span></code></pre></div>
<p>The total population is preserved.</p>
<p>Aggregate available workers by employment center:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">availability</span> <span class="op">&lt;-</span> <span class="va">toy_od_table</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">Destination</span><span class="op">)</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>avail_workers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">W_ij</span><span class="op">)</span><span class="op">)</span>
<span class="va">availability</span>
<span class="co">#&gt; # A tibble: 3 x 2</span>
<span class="co">#&gt;   Destination         avail_workers</span>
<span class="co">#&gt;   &lt;fct&gt;                       &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Employment Center 1          610.</span>
<span class="co">#&gt; 2 Employment Center 2         1710.</span>
<span class="co">#&gt; 3 Employment Center 3         2205.</span></code></pre></div>
<p>Join the availability to the toy_sim_zones_access:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">toy_sim_zones_access</span> <span class="op">&lt;-</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">availability</span>, 
            by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id"</span> <span class="op">=</span> <span class="st">"Destination"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Plot the availability estimates:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">toy_avail_workers_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"jobs"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">avail_workers</span>,
              size <span class="op">=</span> <span class="va">avail_workers</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">16</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"jobs"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">avail_workers</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"population"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">number</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">17</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_color_distiller</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"OrRd"</span>,
                        direction <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>size <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>

<span class="va">toy_avail_workers_plot</span></code></pre></div>
<p><img src="AccessPack-Conventional_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
<p>Since the total population is constant, we can calculate the available workers per job:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">toy_sim_zones_access</span> <span class="op">&lt;-</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>avail_workers_per_job <span class="op">=</span> <span class="va">avail_workers</span><span class="op">/</span><span class="va">number</span><span class="op">)</span></code></pre></div>
<p>Plot the population availability per job:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">toy_avail_workers_job_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"jobs"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">avail_workers_per_job</span>,
              size <span class="op">=</span> <span class="va">avail_workers_per_job</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">16</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"jobs"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">avail_workers_per_job</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"population"</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">17</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_color_gradient2</a></span><span class="op">(</span>midpoint <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>size <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>

<span class="va">toy_avail_workers_job_plot</span></code></pre></div>
<p><img src="AccessPack-Conventional_files/figure-html/unnamed-chunk-21-1.png" width="700"></p>
</div>
<div id="rd-use-case-available-jobs-for-specialized-working-populations" class="section level3">
<h3 class="hasAnchor">
<a href="#rd-use-case-available-jobs-for-specialized-working-populations" class="anchor"></a>3rd Use Case: Available Jobs for Specialized Working Populations</h3>
<p>In this section we introduce catchment/eligibility constraints. Due to differences in educational achievement among the population, the jobs in Employment Center 1 can only be taken by individuals in population centers 1 and 2. Jobs in Employment Center 2 can be taken by individuals in population centers 3, 4, 5, 7, and 8. Lastly, jobs in Employment Center 3 require qualifications available only among individuals in population centers 5, 6, 8, and 9. See figure below.</p>
<p><img src="AccessPack-Conventional_files/figure-html/unnamed-chunk-23-1.png" width="700"></p>
<p>Calculate the proportional allocation of opportunities but now with catchment constraint (referred to as <span class="math inline">\(V_ij_r\)</span>):</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">toy_od_table</span> <span class="op">&lt;-</span> <span class="va">toy_od_table</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>V_ij_r <span class="op">=</span> <span class="fu"><a href="../reference/sp_avail.html">sp_avail</a></span><span class="op">(</span><span class="va">.</span>,
                           o_id <span class="op">=</span> <span class="va">Origin</span>,
                           d_id <span class="op">=</span> <span class="va">Destination</span>,
                           pop <span class="op">=</span> <span class="va">Population</span>,
                           opp <span class="op">=</span> <span class="va">Jobs</span>,
                           r <span class="op">=</span> <span class="va">catchments</span>,
                           f <span class="op">=</span> <span class="va">f</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Verify that the sum of all jobs allocated is consistent with the total number of jobs:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">toy_od_table</span><span class="op">$</span><span class="va">V_ij_r</span><span class="op">)</span>
<span class="co">#&gt; [1] 4500</span>

<span class="va">sum_jobs</span> <span class="op">&lt;-</span> <span class="va">toy_od_table</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">Destination</span><span class="op">)</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>Jobs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">Jobs</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">sum_jobs</span><span class="op">$</span><span class="va">Jobs</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="co">#&gt; [1] 4500</span></code></pre></div>
<p>The total number of jobs is preserved.</p>
<p>Repeat the availability calculation:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">availability</span> <span class="op">&lt;-</span> <span class="va">toy_od_table</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">Origin</span><span class="op">)</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>avail_r <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">V_ij_r</span><span class="op">)</span><span class="op">)</span>
<span class="va">availability</span>
<span class="co">#&gt; # A tibble: 9 x 2</span>
<span class="co">#&gt;   Origin       avail_r</span>
<span class="co">#&gt;   &lt;fct&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Population 1  104.  </span>
<span class="co">#&gt; 2 Population 2  646.  </span>
<span class="co">#&gt; 3 Population 3  303.  </span>
<span class="co">#&gt; 4 Population 4  527.  </span>
<span class="co">#&gt; 5 Population 5 2173.  </span>
<span class="co">#&gt; 6 Population 6  257.  </span>
<span class="co">#&gt; 7 Population 7  161.  </span>
<span class="co">#&gt; 8 Population 8  322.  </span>
<span class="co">#&gt; 9 Population 9    7.52</span></code></pre></div>
<p>Join the availability to the toy_sim_zones_access:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">toy_sim_zones_access</span> <span class="op">&lt;-</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">availability</span>,
            by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id"</span> <span class="op">=</span> <span class="st">"Origin"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Plot the availability estimates:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">toy_avail_r_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">catchment_1</span>,
          fill <span class="op">=</span> <span class="st">"yellow"</span>,
          alpha <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">catchment_1</span>,
          color <span class="op">=</span> <span class="st">"yellow"</span>,
          fill <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">catchment_2</span>,
          fill <span class="op">=</span> <span class="st">"blue"</span>,
          alpha <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">catchment_2</span>,
          color <span class="op">=</span> <span class="st">"blue"</span>,
          fill <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">catchment_3</span>,
          fill <span class="op">=</span> <span class="st">"red"</span>,
          alpha <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">catchment_3</span>,
          color <span class="op">=</span> <span class="st">"red"</span>,
          fill <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"population"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">avail_r</span>,
              size <span class="op">=</span> <span class="va">avail_r</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">17</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"population"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">avail_r</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"jobs"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">number</span>,
              shape <span class="op">=</span> <span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_color_distiller</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"OrRd"</span>,
                        direction <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>size <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>

<span class="va">toy_avail_jobs_plot</span> <span class="op">/</span> <span class="va">toy_avail_r_plot</span></code></pre></div>
<p><img src="AccessPack-Conventional_files/figure-html/unnamed-chunk-28-1.png" width="700"></p>
<p>Available jobs per person with catchment/eligibility conditions:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">toy_sim_zones_access</span> <span class="op">&lt;-</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>avail_r_per_person <span class="op">=</span> <span class="va">avail_r</span><span class="op">/</span><span class="va">number</span><span class="op">)</span></code></pre></div>
<p>Plot the availability per person:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">toy_avail_r_person_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">catchment_1</span>,
          fill <span class="op">=</span> <span class="st">"yellow"</span>,
          alpha <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">catchment_1</span>,
          color <span class="op">=</span> <span class="st">"yellow"</span>,
          fill <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">catchment_2</span>,
          fill <span class="op">=</span> <span class="st">"blue"</span>,
          alpha <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">catchment_2</span>,
          color <span class="op">=</span> <span class="st">"blue"</span>,
          fill <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">catchment_3</span>,
          fill <span class="op">=</span> <span class="st">"red"</span>,
          alpha <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">catchment_3</span>,
          color <span class="op">=</span> <span class="st">"red"</span>,
          fill <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"population"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">avail_r_per_person</span>,
              size <span class="op">=</span> <span class="va">avail_r_per_person</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">17</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"population"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">avail_r_per_person</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span>
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"jobs"</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">16</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_color_gradient2</a></span><span class="op">(</span>midpoint <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>size <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>

<span class="va">toy_avail_jobs_person_plot</span> <span class="op">/</span> <span class="va">toy_avail_r_person_plot</span></code></pre></div>
<p><img src="AccessPack-Conventional_files/figure-html/unnamed-chunk-30-1.png" width="700"></p>
</div>
</div>
<div id="comparing-conventional-accessibility-and-spatial-availability" class="section level2">
<h2 class="hasAnchor">
<a href="#comparing-conventional-accessibility-and-spatial-availability" class="anchor"></a>Comparing Conventional Accessibility and Spatial Availability</h2>
<p>Below we compare the conventional accessibility and the initial <em>spatial availability</em> use case.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">toy_c_access_jobs_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"population"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">c_access_jobs</span>,
              size <span class="op">=</span> <span class="va">c_access_jobs</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">17</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"population"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">c_access_jobs</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"jobs"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">number</span> <span class="op">*</span> <span class="fl">3</span>,
              shape <span class="op">=</span> <span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_color_distiller</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"OrRd"</span>,
                        direction <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>size <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>

<span class="va">toy_avail_jobs_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"population"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">avail_jobs</span>,
              size <span class="op">=</span> <span class="va">avail_jobs</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">17</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"population"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">avail_jobs</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"jobs"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">number</span>,
              shape <span class="op">=</span> <span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_color_distiller</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"OrRd"</span>,
                        direction <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>size <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>

<span class="va">toy_c_access_jobs_plot</span> <span class="op">/</span> <span class="va">toy_avail_jobs_plot</span></code></pre></div>
<p><img src="AccessPack-Conventional_files/figure-html/unnamed-chunk-31-1.png" width="700"></p>
<p>How are the two measures different?</p>
<p>Well, firstly, the sum of all <em>spatial availability</em> values is equal to the total number of jobs within the Employment centers, as such, the <em>spatial availability</em> value for each population center reflects how many jobs are <em>available</em>. This is interpretable. Comparatively, conventional accessibility values associated with each population centers reflects how many jobs can <em>potentially</em> be reached by each population center; these values are not adjusted proportionally to the number of population (i.e. workers ).</p>
<p>Secondly, <em>Spatial availability</em> is meaningful for defining edge population centers. For instance, the remote smaller population centers can be sufficiently accessible and in close proximity to the smaller employement centre; however the conventional accessibile measure obscures this ‘sufficency’ by over-inflating th accessibly of population centers which are more central to more (and larger) employment centers. Conventional accessible does not shed light on how sufficiently accessible opportunties are available to the population.</p>
<p>Conventional accessibly measures attempt to correct for this limitation by … <strong>is a solution to normalize conventional accessibility by population? assuming it is..</strong></p>
<p>However, ultimately if the global number of opportunities (jobs in our case) is not kept equal the accessibilty values assigned to each <span class="math inline">\(i\)</span> will be difficult to interpret and introduce basis. The proposed <em>spatial availability</em> measure addresses this issue.</p>
<p>Additionally, it can be used to equivalently compare the accessible <em>spatial availability</em> of opportunities for all origins globally; this is an important topic in equity analysis. For instance, considering the two remote small population centers in the top left corner it is evident that from the figure below that in one of the population centers there are <em>more</em> jobs available than the people within the population center.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">toy_avail_jobs_person_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"population"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">avail_jobs_per_person</span>,
              size <span class="op">=</span> <span class="va">avail_jobs_per_person</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">17</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"population"</span><span class="op">)</span>,
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">avail_jobs_per_person</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">toy_sim_zones_access</span> <span class="op"><a href="../reference/%&gt;%.html">%&gt;%</a></span> 
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"jobs"</span><span class="op">)</span>,
          shape <span class="op">=</span> <span class="fl">16</span>,
          size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_color_gradient2</a></span><span class="op">(</span>midpoint <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>size <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>


<span class="va">toy_avail_jobs_person_plot</span></code></pre></div>
<p><img src="AccessPack-Conventional_files/figure-html/unnamed-chunk-32-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Anastasia Soukhov, Antonio Paez.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
